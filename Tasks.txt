212.233.108.170 m CVBhjk09* b 17101978Dan QWEasd54#  df(*&G$WXPOIN6S87g786rayo56358G65R(G6%#2ES^o8	sa	w$RFV^Y7ujmz29/		opera QWEasd54#  
rams@art-delivery.ru

Довоз нумерация машин автоматом, как в перевозках
? Клиент процент дохода в алгоритмах
? Счет% = Логистика + ТП
? Категории клиентов - определяются автоматом по среднему счету

Перевести алгоритмы на Словарь с изменениями ?

Доделать список контактов клиентов(Button in menu Show\Hide legals;All searches for clients and legals are in common lists; filter applies for both VM ).
При добавлении\удалении заявки из машины обновлять статусы отправки уведомлений

Add button Recount to Algorithm form . It runs in separate proces
Выделение консолидированного алгоритма: Request регистрируется в Consolidate Commander, Commander начинает прослушиватьизменения в Request.Добавление и выход из консолидированного алгоритма

Пустые значения в значении ряда в отчете приводят к ошибке
Валидировать отсутствие значения в поле вид адреса и описание точки контакта
Попробовать собирать отчет по машине из частей в зависимости от наличия поля в Select, Group, Filter.
Логировать Algorithm Request
Удалить события
поменять цвет границы в машине
на вкладке события исправить отображение меню
Окно Алгоритма копирование значений из столбцов Value (см копирование в Order project)
Синхронизация Prepay.EureSum Убрать EureSum из Prepay. Выводить как сумму по RequestPrepay
Избавиться от AgentId and CustomerId
Проверить почему проставляется финальный валютный счет
Выдавать сообщения об отправке только при реальной отправке
----Текущее--------------------------------------------------------------------------------------------------------------------------------------------------------------------
Итого логистика добавить три параметра CMR СВХ EX1/T1
Транспорт в основной алгоритм П14, для группы одна цифра
Cкрыть переключение типа перевозки
Округление операций по счетам с точностью до копейки.
Ко всем бухгалтерским DataGrid привязать Metadata объект сохранения пользовательских настроек
Delete Prepay and PrepayCustomer when eurosum=0
Double click to close algorithm form must be one

Подсвечивать красным если валюта куплена на меньшую сумму чем уже оплачено поставщику.
Распространить Reject на все вложенные объекты.

Неотменяются изменения в InvoiceDiscount из списка заявок
добавить номер счета ко всем счетам
Добавиить в окно заявки ответственного
Проверить во всех основных окнах отмену изменений

Удалить Stamp из процедур ...Upd и InsertUpdate параметров.
Папка документов машины как для разбивок Консолидация(Группа\Складской номер)_Клиент
Попробовать закрывать удаленные сеансы на общие файлы
Разноска сумм счетов в предоплатах без потери на округление
Перавести счета по машине на VM c предупреждением если изменяется счет с произведенными оплатами
Выборка в RequestPayment - RCL LeftJoin RP, if don't have RP one row base on RCL, the fields check RP for null. Output value from RCL or RP if RCL has more one RP. In First time load RCL then it's RP. If RP count >1 add rows 
Даты оплаты счетов если не полностью- "частично" 
Пересчет евро реализации в рубли по курсу ЦБ на дату СПД.
% наценки план = П40(2) - как вычислять неизвестно
GTD Доход по алгоритму в евро из П40(1) пропорционально инвойсу, Доход % = Доход по алгоритму * курс из декларации; Разница план\факт = Прибыль - Доход % 
ГТД разбить столбец КурсДТ\Курс покупки на два столбца
Таблица Selling хранит расчитанную реализацию на уровне RequestPrepay (spec, customer, request, prepayrequest) заполняется процедурой расчета последовательным распределением от request to prepay.
Переделать фин. счета на собственный Selling

Добавить предупреждение если превышена сумма предоплаты
Пост оплаты подкрашивать розовым.
Избавиться от Agentid and AgentName, CustomerId and CustomerName in Request
Проверить фильтры по финальным счетам
Изменить фильтр по Дате покупки валюты
Изменить фильтр по курсу  покупки валюты
Проверить фильтр по процентам не проходит 0
Просмотр разбивок из бухгалтерии

Резерв валюты: до оплаты поставщику может разноситься на любого поставщика Покупки валюты - Оплаты поставщику - Привезенный товар (Баланс по Юр лицу. В строке юр. лица в заявке добавить баланс) после оплаты поставщику Оплаты поставщику - Привезенный товар
Написать Руководство пользователя
Выгрузка в Excel из отчета
Reserv currency does not leav from request.
В процедурах все ненужные параметры по заявке сделать со значением по умолчанию

Check Consolidate Algoritm, changing persent when Refresh. Fist value is incorrect.

Создаются две декларации одна из которых остается пустой
На все формы добавить кнопку ? открывает текстовый редактор (Help), редактирует только Админ

Контракт: Дата окончания, сумма, ожидаемый срок(по умолчанию 240 дней), контроль окончания и превышения
Предоплаты должны привязываться к контракту клиента. В таблицу предоплат добавить expirydate для переноса даты при истечении. 
Поставщикам добавит контракт: Сумма и дата окончания контракта, ожидаемый срок(по умолчанию 240 дней), Остаток (сумма контракта - оплаты поставщику). Предупреждать о истечении срока за 15 дней, о истечении суммы при появлении инвойса.

Если несколько заявок отправляют сообщения - одно сообщение об отправке
Проверить сохранение Менеджера
Добавить валидацию статуса заявки в объекты Request
Заявки на складе не переводятся в статус 120 из заявки только со склада
Не переводить заявки в склад Москва если нет складской позиции
При ошибке при вводе декларации сообщение пропадает.
Откат статуса заявки если при сохранении декларации ошибка
Фильтры и сумма по выделенному. Расположить после Отправок. Плюс отдельный интерфейс.
В отправках сохранять выгрузку в excel в папку машины

Пользовательские значения для RequestProperties
На форме склада детали показывают заявки(RequestCustomerLegal) -- можно выделить в отдельную складскую позицию и удалить со склада(если в заявке больше
	нет юр лиц сменить статус заявки) можно удалить складскую позицию целиком, если статус не 120
Удаление складских позиций на складе, просмотр детализации.
Из склада выгрузка в excel по шаблону как в машине
В тотал добавить вертуальный метод подключения события объекта коллекции к событию изменения свойства
Сохранение фильтра в модуле Склад
В Total needs property that the calculation has finished
Create UI StatusBar and Maneger object 1 Filter and count record; 2 Last Messages(add here Загрузка начата Загрузка завершена).
При разбиении инвойса на две строки появляется ошибка (Индекс за границей диапазона)
В разбивках проверять название агента на запрещенные символы
Добавлять FondPrepay в выборку для бухгалтерии
--проверить ------------------------------------------------------------------------------------------------------------------------------------------------
--History-------------------------------------------------------------------------------------------------------------------------------------------------
Добавить менеджера в бухгалтерский блок
Перенести проценты в заявку - 20.01
В список поставщиков добавить инфу о действующих контрактах - 16.01
Окно с истекающими контрактами за 2 месяца, за один месяц красным - 25.12
На складе открывать Юр лицо двойным щелчком - 14.12
Отчет для Рамиля - 12.12
Проверить очистку фильтров в Разбиках
Добавить фильры в Справочники\Разбивки на Артикул, Юр лицо, Клиента
Проверить фильтры в Справочники\Разбивки
Обновление формул на новые в 47 машине
Новые параметры перенести в алгоритм 
Добавить в Алгоритм CMR, СВХ , EX1/T1
Добавить в раздел Счет и показатель Итого Счет занчения из алгоритма CMR, СВХ , EX1/T1
Добавить сообщение при отправке если у юр лица нет адреса отправки
Запрет изменения Сервиса если выставлен счет
Старые кнопки отправки сообщений оставить только индикацию что сообщение по текущему статусу отправлено
Отправлять заявки на склад Москва с текущим статусом без даты отправки и возможности изменения пока не достигнут статуса Склад Москва
Ругается при загрузке одной и той же декларации в туже разбивку
Отправлять запись на склад москва при отправке машины (менять статус как завке)
Не переводит в растаможено, переводит обратно в терминал после ввода декларации
После загрузки ГТД заявкам присваивать статус Растаможено
Менять при выгружено машина на склад москва/выдано у тех у кого есть тамож декларация
Добавить признаки ЭДО Д и ЭДО Т
Поля обязательные для заполнения Торговая марка, Страна (по умолчанию Германия), Груз
Шаблоны писем добавить тестовую отпраку письма(поле для адреса), тема письма см файл в вацапе
ЭДО добавить в Юр Лицо признак после Манеджера, В отправках и заявках вывести после Юр лиц можно редактировать
Если введена\удалена дата отгрузки менять статус
При изменении статуса заявки из склада она блокируется
Синхронизация с заявкой, сохранение заявок, запрет изменения всего кроме статуса.
Дату поступления при смене статуса склад москва, дату отгрузки при смене на отгружено
При переводе машины в статус выгружено переводить все заявки в Склад Москва
Не отменяется Склад Москва
Торговые марки через запятую. Доставка из юр лица. Адрес Доставки из Юр лица(Клиента)
Добавить вкладку Склад, попадают заявки со статусом Склад Москва. Номера заявок в группе через запятую.
Добавить новую группу пользователей Склад
В столбце группа номер группы немецкого склада или номер немецкого склада. Одна строчка одно юр лицо.
При смене на 104 создаем склад, если есть группа проходим по всем заявкам перевозки и меняем статус на 104
Добавить статус Склад Москва для заявок.
Проверить суммирование в Отправке бухгалтерии.Переименовать в отправки.
Открывать карточку поставки в отдельном окне но двойному щелчку в списке поставок. Заголовок окна номер машины.
Добавить столбец Доставка из юр лица
Добавить В Справочники кнопку открытия Истекающие ДС
Проверка на активность потока в котором создан загрузчик и запись ошибки
Поиск по всем заявкам(игнорирование других фильтров)
Справочник страны добавить признак вывода в заявку
В заявку добавить страну после импортера, обновлять список при простановке галочки.
В заявках первый столбец номер заявки.
Удалить старые добавить новые показатели в отчете
Добавить в список клиентов кол-во поставок, дата последней.
Проверка на повторяющееся имя клиента.
При загрузке ДС загружать в столбец Z из столбца Ткани
Перенести Манеджер перед поставщиком
Задваивается информация о резерве валюты.
Добавить поля Торговые марки и менеджер в карточку машины бухгалтерии
Поле менеджер в заявке и списке выводить TextBlock и только при редактировании список
В карточку заявки добавить список Торговых марок после выбора поставщика, выбор галочками (аналогично юр лицам)
В списки заявок добавить Торговые марки, через запятую.
Поставщики добавить Торговые марки (заполнить справочник из разбивок), добавлять новых при добавлении разбивки + ручной ввод и удаление из справочника Поставщики.
Проверить работу адресов и контактов в клиенте
Справочник Склад добавить Адреса и Контакты в одельной форме Склад
2 Поставщики отключить давно не ездевших
4 Добавить Контакты, Адреса
3 Поставщики форма списком.
1 Поле поиска по Контакты, Адрес, Псевдонимы, Наименование, Юр лицо, ИНН
1 Переименовать Агенты в Поставщики
Добавить статус клиента в фильтр. Добавить в фильтр по умолчанию только действующие. Обновить статус тем кто не ездил 2 года в Закрыто
Добавить менеджеру номер и поле с выпадающим списком (номер текущего менеджера, пусто) может только указывать себя или снимать
Подкрашивать желтым поле с номером заявки с датой склада более 4 дней, если есть машина с отправкой более 4 дней от даты склада подкрашивать поле красным после помещения в машину убрать цвет
	Статическое поле дата последней отправки, обновлять при обновлении заявок и машины
Проверять уникальность номеров ГТД проверяем в программе в текущей машине и в базе по всем машинам (валидация). Проверка при сохранении.
До склада выводить номер заявки и дата поступления
Криенты с заполненым спецусловием выделять жирным.
Добавить в заявке тип валюты евро\долр
Убрать из заявок и фильтров выбор компл\сборная
1. Изменить расширение бухгалт выгрузок на csv
1. Добавить к наименованию сумму в валюте.
1. Отсутствуют значки на кнопках деклараций
Ощибка при изменении справочника Менеджеры
Заполнять столбец Входит в группу (после артикула) наименованием поставщика.
Выгрузка поступления (одним файлом), реализации для каждого юр лица отдельный файл. Выгружать в папку машины в Поступления и Реализации
В FinalCurSum2 в таблицу добавить поле FinalCurSum2Set где хранится ручной ввод, FinalCurSum2 - значение для отчетов заполняется всегда из клиента ? 
Проверить почему в счетах по машине проставляется счет в евро1
Запрос на сохранение при закрытии счетов по машине и разбивок
При смене юр лица устанавливать не только сумму предоплаты но и суммуДТ
Reestr DT Total sum by Clients
Block the count in Total from Commander when data load
Selling for Request
Остановка задачи обновления
Добавить Агентам псевдонимы, в складе поиск по псевдониму с запросом выбора\добавления клиента
Агенты выгрузить в Excel Имя, Наименование
Переделать Storage на стек DBM.
Папка документов в бухгалтерии как в заявках
В машине Инвойс со скидкой по машине добавить разбивку по услугам
Использовать режим PrefExist где нет необходимости в создании объектов(при распределении сумм)
Отключить сообщение о не полной оплате при покупке валюты
Не обновляется Prepay.Eurosum.
После очистки фильтра не появляются все машины.
Поправить фильтр в SpecificationCustomer and PrepayRequest
Добавить в PrepayRequestHistory DTSum
Округление Реализации
Запрет постановки в загрузку без Услуги
ГТД ГТЛС поля курс, дата, сумма евро, сумма руб. Курс и дата по машине.
Переделать RequestCustomerLegal CreateItem without DataLoad
Добавить поле коментарии.
Окно покупки валюты. Добавить столбцы курс ЦБ, ЦБ+2%
Услуга только ТД в первых 2-х вкладках.
Проверить форму добавления предоплат в заявке (кривой остаток)
Загрузка ГТД в ТЭО №,курс ДТ, общая стоимость ДТ, реализация=курс ДТ*П31
Счета по машине без таможенного счета, все счета в одном окне.
Покупка валюты не проверять сумму.
Добавить карточку машины в бухгалтерию
Не обновлять при создании заявки (открытие пустой карточки) 
Проверить удаление заявки из клиента вызов процедуры под пользователем проходот нормально.
Реализация цб2% * ДТ сумм + курс дт * ДТ сумм * коэф
курс дт - курс на дату дт сделать загрузку из файла
Selling = SellingMarkup + RubCurrencySum
SellingMarkup = this.InvoiceDiscount * this.DTRate * this.SellingMarkupRate - наценка
SellingMarkupRate - коэффициент наценки ввод руками найти в Алгоритме
RubCurrencySum = CurrencySum * CurrencyRate - сумма в рублях потраченная на покупку валюты
CurrencyRate = курс покупки валюты

Отдельная форма для расчета таможенных счетов по машине (Клиент, сумма в евро(из разбивок), сумма в рублях, вверху выбор машины, курс цб, общие суммы аналогично покупке валюты).
При открытии формы проверка что в спецификации во всех разбивках проставлен клиент. 
Оплата счета аналогично оплатам в рублях(несколько оплат)
Дата оплаты поставщику
	1. Устанавливается в ручную: если дата соответствует имеющемуся платежу просто фиксируем дату
								если нет, расчитываем платеж инвойс-сальдо-имеющиеся платежи и фиксируем дату
	2. Вносим новый платеж если сумма платежей больше или равна инвойс-сальдо фиксируем дату
	3. Если из формы Оплаты поставщику см. п. 2.
Проверка что все Request в консолидации на одного Импортера
Контроль превышения суммы в PrepayCustomer над суммой в Prepay
Режим только для чтения в предоплатах
Стоимость в машине сумма по столбцу Инвойс со скидкой
+Открывать\создавать папку заявки (папка программы)/Прямые\Клиент_Складской№_Дата кнопкой статусы.
+Переделать папку машины на (папка программы)/Отправки\ При перемещении заявки в машину копировать папку заявки в папку машины (туда <=> сюда)
Не работает фильтр на локальной версии - права
Клиенты.
Кнопка для переноса папок, день последнего переноса.
Восстановить группы. Группа складской номер. Папка группы. Не менять клиента если установлена группа.
Юридические лица в Заявке из Клиента, перенести в клиента имеющиеся из заявок
Макрос Прямой_8_1С_Евро
Тоже что и Прямой_7, только 1: =L	2: =L*S2	3: =N+O
Кнопку обновления папок перенести в машину
В локальной версии показывать всех клиентов
Локальные могут добавлять заявки
В регистре выделятьгруппу целиком как в машине
В карточке клиента добавить ИНН в списке юр. лиц.
В форме заявки список с проставлением галочек из всех Юр лиц, в списке выбранные через запятую
В карточке машины восстановить кнопку выгрузки в Excel, добавить юр. лица. -- 500
ПСкрыть кнопки удаления клиента
Добавить в выгрузку Excel группа,инвосе,инвоисе со скидкой, услуга
+В Карточке после кнопки Excel добавить кнопку Заявка на перевозку
+Перед обработкой проверить что бы были проставлены все импортеры
Габариты - Объем, Вес по документам, Тип упаковки - коробка, Характер груза - одежда
Имя файла Заявка на перевозку_AD(AT)_номер перевозки первые цифры до дефиса
+Номер ДС просто текст
+При создании файла отбрасывать все после \ слеша.
+При удалении строки файл перемещать в папку ДС_СРТ/Удаленные при отмене обратно.
Переименовать папку Sertificates в ДС_СРТ (при обновлении переименовать на сервере в файлах config)
+При импорте отбрасывать ,_ на конце в странах
+Фильтры как в Excel
Сохранить в папку отправки Отправки\
Меню ДС в основное -10
Убрать даты в имени файла сертификата -10
Привязка файлов сертификатов, которые лежат на месте - 2
Фильтр по товару целиком по запятые - 30
Папка заявки если нет складского номера брать номер и дату заявки, потом переименовывать. - 1,5
Add history log by Goods table
Add async metod for check aviability certificates with deadline and open form if it is necessary. (with GoodsVeiwCommand)
Add table Reminders_tb
Перевести Parcel на объекты
В 1-е меню после перевозок добавить Довоз.
Окно с 2-я вкладками А\М и Грузы. Фон как в Клиентах. 
А\М: Получатель из справочника Импортеры, Статус -выбор Пусто и Закрыто. Закрытые не отображаются в меню галочка Показать Закрытые. Поля Вес, мест, объем - из заявок сумма, стоимость кг - расчет сумма/Вес по документам.
Грузы: попадают заявки когда проставляется дата терминала. № перевозки А\М выбор из незакрытых, стоимость Вес по документам * стоимость кг(А\М)
Новая машина отображается в списке
Не корректно считается в грузах при вводе второй машины и третьей. После обновления ОК.
В довозе адрес доставки жесткий выбор адресов доставки юр лиц
Алгоритмы только чтение кроме пользователей 7 и 14
Ссылка в RequestNew открывает Алгоритм по официальному весу.Могут менятся все поля AlgorithmValues, если не соответствуют расчету (менялось вручную) подсвечивать розовым.
Синхронизация с изменением веса. Фиксируется когда Отгружено.
В Заказах не отображаются суммовые показатели
Раскрасить:Серым:РАСХОД ТЭУ Зеленым:Итого СЧЕТ ТЭУ, К уплате НП,Итого Доход за вычетом НП,Итого Доход за м3,Итого Счет ТД,Итого Доход с вычетом НДС,Итого Доход за вычетом НДС и НП,Итого Доход за м3
Добавить в отчет поля Импортер, Инвоисе, Инвоис со скидкой, ТД (настроить отображение столбца)
Убрать доступ к Request_tb после прогона процедуры веса группы
Перед удалением из коллекции удалять все ссылки на объекты
RequestDBM  SaveChildObjects - ldbm.Collection = item.CustomerLegals; добавить проверку что коллекция не инициализирована
Проверить скорость закрытия.
Перевести историю заявок на VM
Добавить поля сумм для заявок поставленных в загрузку
Блокировка одновременного редактирования request,algorithm, в RequestNew не доходит отмена в Request, добавить процедуру и метод для проверки
Binding на ширину столбцов total  и datagrid Скролинг и в машине
Add check name in store
Fix filter in Client
Algorithm. Transfer to cmd the listening of changes in request.
Фиксация значений алгоритмов при переходе машины в статус Закрыто.
Parcel: check the changed of status when dates of parcel is inputed. 
Добавить Customer и Юр лица в Specification
Добавить фильтрацию по услуге в отчет
Добавить Доход в заявки, если ниже 50 выделять красным 
Консолидация расноска расходов (фрахт и т.д.)
Доп услуги из Конс алгоритма в Заявку (ТЭО и ТД)
При обращении к суммовым полям суммируются все значения из зарегистрированных Requestов. При обновлении Total считается без заригистрированных Request.
Добавить объем в шаблон писем
Фильтр по поставщикам в отчете как и фильтр по клиентам
Add to list of contacts name of contact face.
Фильтрация закрытых машин и грузов
Добавить фильтр закрытых машин как в грузах, подсчет при удалении 2-х
Выбор юр лица в спецификации, Разбивки открытие файла
В значениях алгоритма отложенный расчет (расчет не по загрузке а при вызове метода)
Детали спецификации выгрузка в Excel.
Оптимизировать функции расчета алгоритма(выход как только обнаружена ошибка)
Номер спецификации для заявки - складской номер.
В ошибке при загрузке спецификации выводить номер строки
Не удалять файл спецификации если файл уже лежит в корне
Истекающие сертификаты сортировка по возрастанию оставшихся дней
Проверить загрузку Артикула и Кода ТНВЕД - загружается ввиде 3Е+7
При загрузке спецификации отметка в статусах 2-й плюс
Протяжка Юр Лица в разбивках
In the Prepay add invoice number
When closing filter report form to activate report form
Контроль превышения суммы в PrepayCustomer над суммой в Prepay
Режим только для чтения в предоплатах

Валюта курс покупки =
(
	(
		Сумма всех покупок валюты по счету предоплаты
		/(Сумма всех покупок валюты по счету предоплаты + Сумма всех покупок валюты по таможенному счету)
	)
	*Взвешенный курс покупки валюты по счету
)
+
(
	(
		Сумма всех покупок валюты по таможенному счету
		/(Сумма всех покупок валюты по счету предоплаты + Сумма всех покупок валюты по таможенному счету)
	)
	*Взвешенный курс покупки валюты по таможенному счету
)

Взвешенный курс покупки валюты по счету предоплаты =
	Сумма по покупкам валюты по счету предоплаты (Курс покупки*(Сумма покупки/Сумму всех покупок валюты по счету предоплаты))
Взвешенный курс покупки валюты по таможенному счету
	Сумма по покупкам валюты по таможенному счету(Курс покупки*(Сумма покупки/Сумму всех покупок валюты по таможенному счету))
