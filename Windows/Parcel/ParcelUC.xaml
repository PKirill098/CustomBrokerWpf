<UserControl x:Class="KirillPolyanskiy.CustomBrokerWpf.Windows.Parcel.ParcelUC"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:lib="clr-namespace:KirillPolyanskiy.DataModelClassLibrary;assembly=DataModelClassLibrary"
             xmlns:local="clr-namespace:KirillPolyanskiy.CustomBrokerWpf"
             mc:Ignorable="d" 
             DataContextChanged="UserControl_DataContextChanged" Loaded="UserControl_Loaded" d:DesignHeight="500" d:DesignWidth="1700">
    <Grid IsSharedSizeScope="True">
        <Grid.Resources>
            <lib:BindingProxy x:Key="MainDataContext" Data="{Binding Mode=OneWay, RelativeSource={RelativeSource AncestorType=UserControl, AncestorLevel=1,Mode=FindAncestor}, Path=ParentDataContext}"/>
            <local:BooleanClipBoardConverter x:Key="BooleanClipBoardConverter1" />
            <local:FreeRequestEnableConverter x:Key="keyFreeRequestEnableConverter"/>
            <Style x:Key="MoneyStyleView" TargetType="{x:Type TextBlock}">
                <Setter Property="TextAlignment" Value="Right"/>
                <Setter Property="Margin" Value="2,0,2,0" />
            </Style>
            <Style x:Key="MoneyStyleEdit" TargetType="{x:Type TextBox}">
                <Setter Property="TextAlignment" Value="Right"/>
                <Setter Property="Padding" Value="0,-1,0,-2" />
            </Style>
            <Style x:Key="NumberCenterStyleView" TargetType="{x:Type TextBlock}">
                <Setter Property="HorizontalAlignment" Value="Center"/>
            </Style>
            <Style x:Key="NumberCenterStyleViewEdit" TargetType="{x:Type TextBox}">
                <Setter Property="TextAlignment" Value="Center"/>
                <Setter Property="Padding" Value="0,-1,0,-2" />
            </Style>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="21*"/>
            <ColumnDefinition Width="733*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition MinHeight="20"/>
            <RowDefinition Height="32"/>
            <RowDefinition MinHeight="20"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ToolBar Grid.ColumnSpan="2" IsTabStop="False" Margin="0,1" DataContext="{Binding Mode=OneWay, Source={StaticResource MainDataContext}, Path=Data}">
            <TextBlock Text="Выбор:" Padding="5,0,5,0" HorizontalAlignment="Left" VerticalAlignment="Center" Visibility="{Binding Path=ChooseVisible, Mode=OneWay}"/>
            <ComboBox x:Name="ParcelNumberList" ItemsSource="{Binding Path=Items}" DisplayMemberPath="ParcelNumberEntire" SelectedItem="{Binding CurrentItem, Mode=OneWay}"
                            IsReadOnly="False" IsEditable="True" IsTextSearchEnabled="True" IsSynchronizedWithCurrentItem="True" MinWidth="50" HorizontalAlignment="Stretch" Visibility="{Binding Path=ChooseVisible, Mode=OneTime}" />
            <Separator Visibility="{Binding Path=ChooseVisible, Mode=OneTime}"/>
            <Button ToolTip="Папка документов" Command="{Binding Path=FolderOpen}">
                <Image Source="/CustomBrokerWpf;component/Images/catalog.png" />
            </Button>
            <Separator Visibility="{Binding Source={StaticResource keyVisibilityManagers}, Path=Visibility}"/>
            <Button ToolTip="Добавить перевозку" Command="{Binding Path=Add}" IsTabStop="False" Visibility="{Binding Source={StaticResource keyVisibilityManagers}, Path=Visibility}">
                <Image Source="/CustomBrokerWpf;component/Images/rPlus_01-66-512.png" />
            </Button>
            <Separator Visibility="{Binding Source={StaticResource keyVisibilityManagers}, Path=Visibility}"/>
            <Button ToolTip="Проставить в заявках дату отправки информации на склад." Command="{Binding SetStoreInform}" Visibility="{Binding Source={StaticResource keyVisibilityManagers}, Path=Visibility}">
                <Image Source="/CustomBrokerWpf;component/Images/dates.png"/>
            </Button>
            <Separator/>
            <Button ToolTip="в Excel" Click="ParceltoExcelButton_Click" Command="{Binding CreateExcelReport}">
                <Image Source="/CustomBrokerWpf;component/Images/vexcel4.png" />
            </Button>
            <Button ToolTip="Заявка на перевозку" Content="Заявка" Command="{Binding RequestExcel}"/>
            <Button ToolTip="Почта и СМС" Click="MailSMS_Click" Visibility="Visible">
                <Image Source="/CustomBrokerWpf;component/Images/bell.png"/>
            </Button>
            <Separator/>
            <Button ToolTip="Обновить данные" Command="{Binding SaveRefresh}">
                <Image Source="/CustomBrokerWpf;component/Images/r2Refresh-512.png" />
            </Button>
            <Button ToolTip="Сохранить изменения в БД" Command="{Binding Save}" IsTabStop="False">
                <Image Source="/CustomBrokerWpf;component/Images/Save.png" />
            </Button>
            <Button ToolTip="Отменить несохраненные изменения" Command="{Binding Reject}" >
                <Image Source="/CustomBrokerWpf;component/Images/rRemove-512.png" />
            </Button>
            <ToggleButton ToolTip="Изменить фильтр" x:Name="ParcelFilterButton" IsChecked="{Binding Path=IsShowFilterWindow}" Click="ParcelFilterButton_Click" Visibility="{Binding Path=ChooseVisible, Mode=OneTime}" IsTabStop="False">
                <Image Source="/CustomBrokerWpf;component/Images/rshester.png" />
            </ToggleButton>
            <Separator/>
            <Button x:Name="thisCloseButton" Content="Закрыть" Click="CloseButton_Click" Visibility="{Binding Path=CloseVisible}"/>
            <Popup IsOpen="{Binding Path=PopupIsOpen}" StaysOpen="False" Placement="Bottom" PopupAnimation="Fade" AllowsTransparency="True" Visibility="Collapsed" IsHitTestVisible="False" >
                <Border BorderBrush="Beige" BorderThickness="2" Background="{Binding Path=PopupBackground}" CornerRadius="7">
                    <TextBlock Text="{Binding Path=PopupText}" Margin="2"  FontStyle="Italic" Foreground="Teal" />
                </Border>
            </Popup>
        </ToolBar>
        <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" Padding="0" Grid.ColumnSpan="2">
            <Grid DataContext="{Binding Mode=OneWay}">
                <Grid.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="Margin" Value="1,0"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="HorizontalAlignment" Value="Left"/>
                    </Style>
                    <Style TargetType="TextBox">
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="TextAlignment" Value="Left"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Setter Property="Margin" Value="1,0"/>
                        <Style.Triggers>
                            <Trigger Property="IsFocused" Value="False">
                                <Setter Property="Background" Value="#eff6ff"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                    <Style TargetType="ComboBox">
                        <Setter Property="Background" Value="#eff6ff"/>
                        <Setter Property="BorderBrush" Value="{x:Null}"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Margin" Value="2"/>
                    </Style>
                    <Style TargetType="Border">
                        <Setter Property="Background" Value="#eff6ff"/>
                        <Setter Property="BorderBrush" Value="#FFCCCCCC"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Margin" Value="4"/>
                    </Style>
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280"/>
                    <ColumnDefinition Width="218"/>
                    <ColumnDefinition Width="350"/>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>
                <Border>
                    <Grid x:Name="WrapPanel1" IsEnabled="{Binding Path=IsEnabled}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <!--<RowDefinition SharedSizeGroup="r0"/>-->
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <TextBlock Grid.Row="0" Text="Номер"/>
                        <Grid Grid.Row="0" Grid.Column="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="40"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Border BorderThickness="1,0,0,0">
                                <TextBox  Text="{Binding Path=ParcelNumber, Mode=TwoWay}" Margin="3,2,3,0" IsTabStop="False" TextAlignment="Center" Background="#eff6ff"  />
                            </Border>
                            <Border BorderThickness="1,0,0,0" Grid.Column="1">
                                <TextBox Text="{Binding Path=ParcelNumberEntire, Mode=OneWay}" Margin="3,2,3,0" IsReadOnly="True" IsTabStop="False" TextAlignment="Center" Background="#eff6ff"  />
                            </Border>
                        </Grid>
                        <Border Grid.Row="1" Grid.Column="0" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Статус"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" BorderThickness="1,1,0,0">
                            <ComboBox SelectedItem="{Binding Path=Status}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.States}" DisplayMemberPath="Name" Background="#eff6ff" BorderBrush="{x:Null}" Margin="2" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="0" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Груз"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderThickness="1,1,0,0">
                            <ComboBox x:Name="goodstypeComboBox" SelectedItem="{Binding Path=GoodsType}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.GoodsTypes}" DisplayMemberPath="Name" />
                        </Border>
                        <Border Grid.Row="3" Grid.Column="0" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Машина"/>
                        </Border>
                        <Grid Grid.Row="3" Grid.Column="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Border Grid.Column="0" BorderThickness="1,1,0,0">
                                <TextBox Text="{Binding Path=Lorry}" MaxLength="6" TextAlignment="Left" VerticalAlignment="Center" BorderThickness="0" />
                            </Border>
                            <Border Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                                <TextBlock Text="№ отправки"/>
                            </Border>
                            <Border Grid.Column="2" BorderThickness="1,1,0,0">
                                <TextBox Text="{Binding Path=ShipmentNumber}" MaxLength="6" TextAlignment="Center" VerticalAlignment="Center" BorderThickness="0" />
                            </Border>
                        </Grid>
                        <Border Grid.Row="4" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Декларации"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=Declaration}" MaxLength="106" Margin="3,2,3,0" TextAlignment="Left" TextWrapping="WrapWithOverflow" BorderThickness="0" Padding="2,0"/>
                        </Border>
                    </Grid>
                </Border>
                <Border Grid.Column="1">
                    <Grid x:Name="WrapPanel2" Background="#eff6ff" IsEnabled="{Binding Path=IsEnabled}">
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="0"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0">
                            <TextBlock Text="Отгрузка (п/ф)"/>
                        </Border>
                        <Border Grid.Row="0" Grid.Column="1" BorderThickness="1,0,0,0">
                            <TextBox Text="{Binding Path=ShipPlanDate, StringFormat='dd.MM.yy', TargetNullValue=''}" ToolTip="Планируемая дата отгрузки" TextAlignment="Center"/>
                        </Border>
                        <Border Grid.Row="0" Grid.Column="2" BorderThickness="1,0,0,0">
                            <TextBox Text="{Binding Path=ShipDate, StringFormat='dd.MM.yy', TargetNullValue=''}" ToolTip="Фактическая дата отгрузки" TextAlignment="Center"/>
                        </Border>
                        <Button Grid.Row="0" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="60" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=ShipPlanDateMailImage,Mode=OneWay}"/>
                        </Button>
                        <Border Grid.Row="1" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Grid.Row="1" Text="Оформлено" ToolTip="Дата оформления"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=Prepared, StringFormat='dd.MM.yy', TargetNullValue=''}" TextAlignment="Center" ToolTip="Дата оформления"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="2" BorderBrush="White" BorderThickness="0,1,0,0"/>
                        <Button Grid.Row="1" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="70" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=PreparedMailImage,Mode=OneWay}"/>
                        </Button>
                        <Border Grid.Row="2" Grid.Column="0" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Ввезено" ToolTip="Дата пересечения границы"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding Path=CrossedBorder, StringFormat='dd.MM.yy', TargetNullValue=''}" TextAlignment="Center" ToolTip="Дата пересечения границы"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="2" BorderBrush="White" BorderThickness="0,1,0,0"/>
                        <Button Grid.Row="2" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="80" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=CrossedBorderMailImage,Mode=OneWay}"/>
                        </Button>
                        <Border Grid.Row="3" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Терминал" ToolTip="Дата въезда на таможенный терминал"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TerminalIn, StringFormat='dd.MM.yy', TargetNullValue=''}" TextAlignment="Center" ToolTip="Дата въезда на таможенный терминал"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="2" BorderBrush="White" BorderThickness="0,1,0,0"/>
                        <Button Grid.Row="3" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="90" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=TerminalInMailImage,Mode=OneWay}"/>
                        </Button>
                        <Border Grid.Row="4" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Растаможено" ToolTip="Дата выезда из таможенного терминала"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Path=TerminalOut, StringFormat='dd.MM.yy', TargetNullValue=''}" TextAlignment="Center" ToolTip="Дата выезда из таможенного терминала"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="2" BorderBrush="White" BorderThickness="0,1,0,0"/>
                        <Button Grid.Row="4" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="100" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=TerminalOutMailImage,Mode=OneWay}"/>
                        </Button>
                        <Border Grid.Row="5" Grid.Column="0" BorderBrush="White" BorderThickness="0,1,0,0">
                            <TextBlock Text="Выгружено" ToolTip="Дата выгрузки"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="1" BorderBrush="White" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=Unloaded, StringFormat='dd.MM.yy', TargetNullValue=''}" ToolTip="Дата выгрузки" TextAlignment="Center"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="2" BorderThickness="0,1,0,0"/>
                        <Button Grid.Row="5" Grid.Column="3" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SendMail}" CommandParameter="110" Height="22" Margin="2,0" VerticalAlignment="Center">
                            <Image Source="{Binding Path=UnloadedMailImage,Mode=OneWay}"/>
                        </Button>
                    </Grid>
                </Border>
                <Border Grid.Column="2">
                    <Grid x:Name="WrapPanel3" Grid.Column="4" Background="#eff6ff" IsEnabled="{Binding Path=IsEnabled}">
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="1.5*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="Перевозчик"/>
                        <Border Grid.Row="0" Grid.Column="1" BorderThickness="1,0,0,0">
                            <TextBox Text="{Binding Path=Carrier}" MaxLength="100"/>
                        </Border>
                        <!--<TextBlock Text="контактное лицо" Margin="5,0,0,0" VerticalAlignment="Center"/>-->
                        <Border Grid.Row="0" Grid.Column="2" BorderThickness="1,0,0,0">
                            <TextBox Text="{Binding Path=CarrierPerson}" MaxLength="30" ToolTip="Контактное лицо"/>
                        </Border>
                        <!--<TextBlock Text="тел." Margin="5,0,0,0" VerticalAlignment="Center" ToolTip="Телефон контактного лица"/>-->
                        <Border Grid.Row="0" Grid.Column="3" BorderThickness="1,0,0,0">
                            <TextBox Text="{Binding Path=CarrierTel}" MaxLength="20" ToolTip="Телефон контактного лица"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Водитель"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=Trucker}" MaxLength="30" ToolTip="ФИО водителя" />
                        </Border>
                        <Border Grid.Row="1" Grid.Column="3" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TruckerTel}" MaxLength="20" ToolTip="Телефон водителя"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Машина" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=LorryRegNum, ValidatesOnExceptions=True, NotifyOnValidationError=True}" MaxLength="20" ToolTip="Регистрационный знак(номер)"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="2" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=LorryVIN, ValidatesOnExceptions=True, NotifyOnValidationError=True}" MaxLength="20" ToolTip="VIN номер"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Прицеп"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TrailerRegNum, ValidatesOnExceptions=True, NotifyOnValidationError=True}" MaxLength="20" ToolTip="Регистрационный знак(номер)"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="2" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TrailerVIN, ValidatesOnExceptions=True, NotifyOnValidationError=True}" ToolTip="VIN номер" MaxLength="20"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Объем"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="3" BorderThickness="1,1,0,0">
                            <TextBox x:Name="lorryvolumeTextBox" Text="{Binding Path=LorryVolume, TargetNullValue='', StringFormat=\{0:N4\}, ValidatesOnExceptions=True}" Foreground="{Binding Path=LorryVolumeForeground}" TextAlignment="Left" />
                        </Border>
                        <Border Grid.Row="5" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Тоннаж"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="3" BorderThickness="1,1,0,0">
                            <TextBox x:Name="lorryWeightTextBox" Text="{Binding Path=LorryTonnage, TargetNullValue='', StringFormat=\{0:N4\}, ValidatesOnExceptions=True, NotifyOnValidationError=True}" Foreground="{Binding Path=LorryTonnageForeground}" TextAlignment="Left" />
                        </Border>
                    </Grid>
                </Border>
                <Border Grid.Column="3">
                    <Grid Background="#eff6ff">
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Text="ОБЩЕЕ" HorizontalAlignment="Center" TextAlignment="Center"/>
                        <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Объем / Мест"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="volumeTextBox" Text="{Binding Total.Volume, Mode=OneWay, StringFormat=\{0:N4\}}" Foreground="{Binding Path=VolumeForeground}"  IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="1" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="cellNumberTextBox" Text="{Binding Path=Total.CellNumber,Mode=OneWay}" Foreground="{Binding Path=CellNumberForeground}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес (факт / док)"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="actualWeightTextBox" Text="{Binding Path=Total.ActualWeight, StringFormat=\{0:N4\}, Mode=OneWay}" Foreground="{Binding ActualWeightForeground, FallbackValue=Black}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="officialWeightTextBox" Text="{Binding Path=Total.OfficialWeight, StringFormat=\{0:N4\}, Mode=OneWay}" Foreground="{Binding Path=OfficialWeightForeground}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="3" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес, разница"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="offactWeightTextBox" Text="{Binding Path=Total.DifferenceWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="4" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="goodValueTextBox" Text="{Binding Path=Total.Invoice, Mode=OneWay, StringFormat=\{0:N2\}}" Foreground="{Binding Path=InvoiceForeground}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="5" Grid.Column="0" BorderThickness="1,1,0,0">
                            <TextBlock Text="Стоимость, скидка"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="goodValueDiscountTextBox" Text="{Binding Path=Total.InvoiceDiscount, StringFormat=\{0:N2\}, Mode=OneWay}" Foreground="{Binding Path=InvoiceDiscountForeground}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="6" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость, дт"/>
                        </Border>
                        <Border Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=DeliveryPrice, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="7" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Сумма страховки"/>
                        </Border>
                        <Border Grid.Row="7" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding InsurancePrice, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Трансп. Расходы"/>
                        </Border>
                        <Border Grid.Row="8" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Transport, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Total.Transport, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                    </Grid>
                </Border>
                <Border Grid.Column="4">
                    <Grid Background="#eff6ff">
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Text="ДЕЛИВЕРИ" HorizontalAlignment="Center" TextAlignment="Center"/>
                        <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Объем / Мест"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DVolumeTextBox" Text="{Binding Path=TotalDelivery.Volume, StringFormat=\{0:N4\},Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="1" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DCellNumberTextBox" Text="{Binding Path=TotalDelivery.CellNumber, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес (факт / док)"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DActualWeightTextBox" Text="{Binding Path=TotalDelivery.ActualWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DOfficialWeightTextBox" Text="{Binding Path=TotalDelivery.OfficialWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="3" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес, разница"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DOffactWeightTextBox" Text="{Binding Path=TotalDelivery.DifferenceWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="4" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DGoodValueTextBox" Text="{Binding Path=TotalDelivery.Invoice, StringFormat=\{0:N2\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="5" Grid.Column="0" BorderThickness="1,1,0,0">
                            <TextBlock Text="Стоимость, скидка"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="DGoodValueDiscountTextBox" Text="{Binding Path=TotalDelivery.InvoiceDiscount, StringFormat=\{0:N2\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="6" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость, дт"/>
                        </Border>
                        <Border Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=DDeliveryPrice, StringFormat=\{0:N2\}, TargetNullValue=''}" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="7" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Сумма страховки"/>
                        </Border>
                        <Border Grid.Row="7" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=DInsurancePrice, StringFormat=\{0:N2\}, TargetNullValue=''}" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Трансп. Расходы"/>
                        </Border>
                        <Border Grid.Row="8" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding TransportD, StringFormat=\{0:N\}, TargetNullValue=''}" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding TotalDelivery.Transport, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                    </Grid>
                </Border>
                <Border Grid.Column="5">
                    <Grid Background="#eff6ff">
                        <Grid.Resources>
                            <Style TargetType="Border">
                                <Setter Property="BorderBrush" Value="White"/>
                                <Setter Property="Margin" Value="0"/>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                            <RowDefinition SharedSizeGroup="r0"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Text="ТРЕЙД" HorizontalAlignment="Center" TextAlignment="Center"/>
                        <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Объем / Мест"/>
                        </Border>
                        <Border Grid.Row="1" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TVolumeTextBox" Text="{Binding Path=TotalTrade.Volume, StringFormat=\{0:N4\},Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="1" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TCellNumberTextBox" Text="{Binding Path=TotalTrade.CellNumber,Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес (факт / док)"/>
                        </Border>
                        <Border Grid.Row="2" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TActualWeightTextBox" Text="{Binding Path=TotalTrade.ActualWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="2" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TOfficialWeightTextBox" Text="{Binding Path=TotalTrade.OfficialWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="3" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Вес, разница"/>
                        </Border>
                        <Border Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TOffactWeightTextBox" Text="{Binding Path=TotalTrade.DifferenceWeight, StringFormat=\{0:N4\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="4" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость"/>
                        </Border>
                        <Border Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TGoodValueTextBox" Text="{Binding Path=TotalTrade.Invoice, StringFormat=\{0:N2\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="5" Grid.Column="0" BorderThickness="1,1,0,0">
                            <TextBlock Text="Стоимость, скидка"/>
                        </Border>
                        <Border Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox x:Name="TGoodValueDiscountTextBox" Text="{Binding Path=TotalTrade.InvoiceDiscount, StringFormat=\{0:N2\}, Mode=OneWay}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                        <Border Grid.Row="6" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Стоимость, дт"/>
                        </Border>
                        <Border Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TDeliveryPrice, StringFormat=\{0:N2\}, TargetNullValue=''}" />
                        </Border>
                        <Border Grid.Row="7" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Сумма страховки"/>
                        </Border>
                        <Border Grid.Row="7" Grid.Column="1" Grid.ColumnSpan="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding Path=TInsurancePrice, StringFormat=\{0:N2\}, TargetNullValue=''}" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="0" BorderThickness="0,1,0,0">
                            <TextBlock Text="Трансп. Расходы"/>
                        </Border>
                        <Border Grid.Row="8" Grid.Column="1" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding TransportT, StringFormat=\{0:N\}, TargetNullValue=''}" />
                        </Border>
                        <Border Grid.Row="8" Grid.Column="2" BorderThickness="1,1,0,0">
                            <TextBox Text="{Binding TotalTrade.Transport, Mode=OneWay, StringFormat=\{0:N\}}" IsReadOnly="True" IsTabStop="False" />
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </ScrollViewer>
        <Grid Grid.Row="5" Grid.ColumnSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <DataGrid x:Name="ParcelRequestDataGrid" ItemsSource="{Binding Path=ParcelRequests}" CanUserAddRows="False" CanUserDeleteRows="False" RowDetailsVisibilityMode="Collapsed" AutoGenerateColumns="False" IsTabStop="False" RowHeaderWidth="15" CanUserResizeRows="False" FrozenColumnCount="1" HorizontalGridLinesBrush="RoyalBlue" VerticalGridLinesBrush="RoyalBlue" AlternatingRowBackground="WhiteSmoke" HorizontalAlignment="Left"
                SelectionChanged="ParcelRequestDataGrid_SelectionChanged" BeginningEdit="RequestsDataGrid_BeginningEdit" RowEditEnding="RequestsDataGrid_RowEditEnding"
                ColumnDisplayIndexChanged="ParcelRequestDataGrid_ColumnDisplayIndexChanged"
                Background="#e0f7e3" MouseDoubleClick="RequestsDataGrid_MouseDoubleClick" >
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter Property="Background" Value="#e0f7e3"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="№" Binding="{Binding Path=Id, Converter={StaticResource keyNoDisplayNewId}}" IsReadOnly="True" ElementStyle="{StaticResource NumberCenterStyleView}" />
                    <DataGridTextColumn Header="Складской №" Binding="{Binding Path=StorePointDate, ValidatesOnExceptions=true, NotifyOnValidationError=true, TargetNullValue='', Mode=OneWay}"/>
                    <DataGridComboBoxColumn Header="Статус" SelectedItemBinding="{Binding Path=Status}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.ParcelRequestStates}" DisplayMemberPath="Name" SortMemberPath="Status.Id" ClipboardContentBinding="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}" Width="64"/>
                    <DataGridTextColumn Header="Группа" Binding="{Binding Path=ParcelGroup, UpdateSourceTrigger=LostFocus, TargetNullValue='',NotifyOnValidationError=True}" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ToolTip" Value="Группа загрузки (Позиция по складу)"/>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="КОН" Binding="{Binding Path=Consolidate, UpdateSourceTrigger=LostFocus, TargetNullValue='',NotifyOnValidationError=True}" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ToolTip" Value="Консолидация"/>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                    </DataGridTextColumn>
                    <DataGridTemplateColumn CanUserSort="False" SortMemberPath="Template1" Width="SizeToCells">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18"/>
                                        <ColumnDefinition Width="18"/>
                                        <ColumnDefinition Width="18"/>
                                        <ColumnDefinition Width="18"/>
                                        <ColumnDefinition Width="18"/>
                                    </Grid.ColumnDefinitions>
                                    <Button ToolTip="Каталог" Tag="{Binding}" Click="RequestFolderOpen_Click" Grid.Column="0"  Margin="2,0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Padding="0" BorderBrush="{x:Null}" Background="{x:Null}">
                                        <Image Source="/CustomBrokerWpf;component/Images/cat.png"/>
                                    </Button>
                                    <Image ToolTip="Группа менеджеров" Grid.Column="1" Source="{Binding Path=ManagerGroupImage}" Margin="2,0"/>
                                    <!--<ComboBox Grid.Column="2" SelectedIndex="{Binding Path=StateInv,TargetNullValue=0,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="Инвойс" Style="{StaticResource ComboBoxButtonLess}" Height="14" Margin="2,0" Padding="0">
													<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
														<Image Source="/CustomBrokerWpf;component/Images/plus.gif" Height="14" Margin="0"/>
													</ComboBoxItem>
													<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
														<Image Source="Images/inv_1.png" Height="14" Margin="0"/>
													</ComboBoxItem>
													<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
														<Image Source="/CustomBrokerWpf;component/Images/inv_2.png" Height="14" Margin="0"/>
													</ComboBoxItem>
												</ComboBox>-->
                                    <Image Grid.Column="2" ToolTip="Разбивка загружена" Source="{Binding Path=StateExcImagePath,Mode=OneWay}" Height="14"  Margin="2,0"/>
                                    <ComboBox Grid.Column="3" SelectedIndex="{Binding Path=StateDoc,TargetNullValue=0,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="МАРКИРОВКА" Style="{StaticResource ComboBoxButtonLess}" Height="14" Margin="2,0" Padding="0">
                                        <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                            <Image Source="/CustomBrokerWpf;component/Images/plus.gif" Height="14" Margin="0"/>
                                        </ComboBoxItem>
                                        <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                            <Image Source="/CustomBrokerWpf;component/Images/doc_1.png" Height="14" Margin="0"/>
                                        </ComboBoxItem>
                                        <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                            <Image Source="/CustomBrokerWpf;component/Images/doc_2.png" Height="14" Margin="0"/>
                                        </ComboBoxItem>
                                    </ComboBox>
                                    <!--<Button Grid.Column="4" ToolTip="Отправка уведомления &quot;Ваша поставка готова к выдаче&quot;" Command="{Binding Path=SendMail}" CommandParameter="TakeGoods9" Margin="2,0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Padding="0" BorderBrush="{x:Null}" Background="{x:Null}">-->
                                    <Image Grid.Column="4" Source="{Binding Path=MailStateImage}" ToolTip="{Binding Path=MailStateToolTip}" Margin="2,0"/>
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Менеджер" CanUserSort="True" SortMemberPath="Manager.NameComb" ClipboardContentBinding="{Binding Path=Manager.NameComb}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Manager.NameComb}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Managers}"  SelectedValue="{Binding Path=Manager,UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="NameComb" IsSynchronizedWithCurrentItem="False"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Поставщик" CanUserSort="True" SortMemberPath="Agent.Name" ClipboardContentBinding="{Binding Path=Agent.Name}" Width="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Agent.Name, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding Path=Agent.Name}"/>
                            </Style>
                        </DataGridTemplateColumn.CellStyle>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox SelectedValue="{Binding Path=AgentId, TargetNullValue=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource keyNotNullConverter}}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=Agent.Name}"
                                                  ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Agents}" SelectedValuePath="Id" DisplayMemberPath="Name">
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Торговые марки" Width="150" CanUserSort="True" SortMemberPath="BrandNames" ClipboardContentBinding="{Binding Path=BrandNames}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=BrandNames, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding Path=BrandNames}"/>
                            </Style>
                        </DataGridTemplateColumn.CellStyle>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox Text="{Binding Path=BrandNames, Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=BrandNames}"
                                                  ItemsSource="{Binding Path=Brands}" DisplayMemberPath="Brand.Name">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding Path=Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}" VerticalContentAlignment="Center" Style="{StaticResource ErrorStyle}">
                                                <TextBlock Text="{Binding Brand.Name}" VerticalAlignment="Center"/>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Клиент" CanUserSort="True" SortMemberPath="Customer.Name" ClipboardContentBinding="{Binding Path=Customer.Name}" Width="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Customer.Name, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox SelectedValue="{Binding Path=CustomerId, TargetNullValue=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource keyNotNullConverter}}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=Customer.Name}"
                                                  ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Customers}" SelectedValuePath="Id" DisplayMemberPath="Name">
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                        <DataGridTemplateColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding Path=Agent.Name}"/>
                                <Setter Property="FontWeight" Value="{Binding Customer.NameFontWeight}"/>
                            </Style>
                        </DataGridTemplateColumn.CellStyle>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Юр. лица" Width="150" SortMemberPath="CustomerLegalsNames">
                        <DataGridTemplateColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding Path=CustomerLegalsNames}"/>
                                <Setter Property="FontWeight" Value="{Binding CustomerLegalsNamesFontWeight}"/>
                                <Style.Triggers>
                                    <MultiDataTrigger >
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=InvoiceDiscountFill, TargetNullValue=''}" Value="False" />
                                            <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
                                        </MultiDataTrigger.Conditions>
                                        <Setter Property="Background" Value="#f7e0e0"/>
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTemplateColumn.CellStyle>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=CustomerLegalsNames, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox Text="{Binding Path=CustomerLegalsNames, Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=CustomerLegalsNames}"
                                                  ItemsSource="{Binding Path=CustomerLegals}" DisplayMemberPath="CustomerLegal.Name">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding Path=Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}" FocusManager.IsFocusScope="True">
                                                <TextBlock Text="{Binding CustomerLegal.Name}"/>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridCheckBoxColumn Header="ЭДО Деливери" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.EDOD, Mode=TwoWay}" IsThreeState="False" Width="50">
                        <DataGridCheckBoxColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ToolTip" Value="ЭДО Деливери"/>
                            </Style>
                        </DataGridCheckBoxColumn.HeaderStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridCheckBoxColumn Header="ЭДО Tрэйд" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.EDOT, Mode=TwoWay}" IsThreeState="False" Width="50">
                        <DataGridCheckBoxColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ToolTip" Value="ЭДО Tрэйд"/>
                            </Style>
                        </DataGridCheckBoxColumn.HeaderStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridComboBoxColumn Header="Импортер" SelectedItemBinding="{Binding Path=Importer}" ClipboardContentBinding="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}"
                                    ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Importers}" DisplayMemberPath="Name" SortMemberPath="Importer.Name"  Width="100">
                        <DataGridComboBoxColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}"/>
                            </Style>
                        </DataGridComboBoxColumn.CellStyle>
                    </DataGridComboBoxColumn>
                    <DataGridTextColumn Header="Вес Д" Binding="{Binding Path=OfficialWeight, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Width="50" />
                    <DataGridTextColumn Header="Вес Ф" Binding="{Binding Path=ActualWeight, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Width="50" />
                    <DataGridTextColumn Header="Объем" Binding="{Binding Path=Volume, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" />
                    <DataGridTextColumn Header="Мест" Binding="{Binding Path=CellNumber, TargetNullValue='', NotifyOnValidationError=True, ValidatesOnExceptions=true}" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}" />
                    <DataGridTextColumn Header="Инвойс" Binding="{Binding Path=Invoice, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Selector.IsSelected="True" Width="80" />
                    <DataGridTextColumn Header="Со скидкой" Binding="{Binding Path=InvoiceDiscount, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Selector.IsSelected="True" Width="80" />
                    <DataGridComboBoxColumn Header="Услуга" SelectedValueBinding="{Binding Path=ServiceType, TargetNullValue=''}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.ServiceTypes}" SelectedValuePath="Name" DisplayMemberPath="Name"/>
                    <DataGridTemplateColumn Header="Тип груза" CanUserSort="True" SortMemberPath="Cargo" ClipboardContentBinding="{Binding Path=Cargo}" Width="SizeToHeader">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Cargo, TargetNullValue=''}" Margin="2"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="ToolTip" Value="{Binding Path=Cargo}"/>
                            </Style>
                        </DataGridTemplateColumn.CellStyle>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox ItemsSource="{Binding Path=CargoList}" Text="{Binding Path=Cargo,Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" IsDropDownOpen="True" ToolTip="{Binding Path=Cargo}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}" VerticalContentAlignment="Center" Style="{StaticResource ErrorStyle}">
                                                <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="Счет" Binding="{Binding Path=TotalPay, StringFormat=\{0:N0\}, TargetNullValue=''}" IsReadOnly="True" Width="80">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter Property="Background" Value="#f7ede0" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Доход" Binding="{Binding Path=IncomePay, StringFormat=\{0:N0\}, TargetNullValue=''}" IsReadOnly="True" Width="80">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter Property="Background" Value="#f7ede0" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=IncomePayPoor,Mode=OneWay}" Value="True">
                                        <Setter Property="Foreground" Value="Red"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="СЧ, %" Binding="{Binding TotalPayInvoicePer, Mode=OneWay, NotifyOnValidationError=True, StringFormat=\{0:P\}, TargetNullValue=''}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" IsReadOnly="True" Width="80">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter Property="Background" Value="#f7ede0" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="ТП.%" Binding="{Binding Path=CustomsPayInvoice, Mode=OneWay, StringFormat=\{0:P\}, TargetNullValue=''}" ElementStyle="{StaticResource MoneyStyleView}" IsReadOnly="True" Width="80">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="False">
                                        <Setter Property="Background" Value="#f7e0e0" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                                <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding}" Background="#f7e0e0" FontWeight="Bold" Padding="4,0" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Доставка" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.DeliveryType_.Name, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource StyleTextBlockAlignmentCenter}" Selector.IsSelected="True" Width="80" />
                    <DataGridTextColumn Header="Примечания" Binding="{Binding Path=Notes,Mode=OneWay}" IsReadOnly="True" Width="SizeToHeader"/>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Click="HistoryOpen_Click" Tag="{Binding}" Height="15" Padding="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Background="{x:Null}" >
                                    <Image Source="/CustomBrokerWpf;component/Images/his.png" />
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="4">
                <TextBlock Text="Кол-во мест" Grid.Row="1" Grid.Column="7" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                <TextBox x:Name="cellNumberFreeTextBox" Text="{Binding ParcelRequestsTotalSelected.CellNumber, Mode=OneWay, StringFormat=\{0:N0\}}" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
                <TextBlock Text="Вес по док, кг" Grid.Row="2" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                <TextBox x:Name="OfficialWeightTextBox" Text="{Binding Path=ParcelRequestsTotalSelected.OfficialWeight,Mode=OneWay, StringFormat=\{0:N4\}}" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
                <TextBlock Text="Объем, м3" Grid.Row="1" Grid.Column="3" Margin="5,0,0,0" VerticalAlignment="Center"/>
                <TextBox x:Name="VolumeTextBox" Text="{Binding Path=ParcelRequestsTotalSelected.Volume,Mode=OneWay, StringFormat=\{0:N4\}}" Grid.Row="1" Grid.Column="4" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
                <TextBlock Text="Вес факт, кг" Grid.Row="1" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                <TextBox x:Name="actualWeightFreeTextBox" Text="{Binding Path=ParcelRequestsTotalSelected.ActualWeight,Mode=OneWay, StringFormat=\{0:N4\}}" Grid.Row="1" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
                <TextBlock Text="факт-док" Grid.Row="3" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                <TextBox x:Name="offactWeightFreeTextBox" Text="{Binding Path=ParcelRequestsTotalSelected.DifferenceWeight,Mode=OneWay, StringFormat=\{0:N4\}}" Grid.Row="3" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
                <TextBlock Text="стоимость" Grid.Row="3" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                <TextBox x:Name="goodValueFreeTextBox" Text="{Binding Path=ParcelRequestsTotalSelected.InvoiceDiscount,Mode=OneWay, StringFormat=\{0:N2\}}" Grid.Row="3" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            </StackPanel>
        </Grid>
        <GridSplitter Grid.Row="6" Grid.ColumnSpan="2" Height="6" VerticalAlignment="Center" ResizeDirection="Rows" HorizontalAlignment="Stretch" Margin="3,13" IsTabStop="False" />
        <StackPanel x:Name="StackPanel1" Grid.Row="6" Grid.ColumnSpan="2" Margin="0,2" Orientation="Horizontal" Visibility="{Binding Source={StaticResource keyVisibilityManagers}, Path=Visibility}" IsEnabled="{Binding Path=IsEnabled}">
            <Button x:Name="RequestUpButton" ToolTip="Поставить заявку в загрузку" IsEnabled="{Binding Path=Status.Id, Converter={StaticResource keyFreeRequestEnableConverter}}" Visibility="{Binding Path=RequestAreaVisibility,Mode=OneWay}" Margin="20,1" Click="RequestAddButton_Click" IsTabStop="False">
                <Image Source="/CustomBrokerWpf;component/Images/verh.png" />
            </Button>
            <Button x:Name="RequestUpDown" ToolTip="Снять заявку с загрузки" IsEnabled="{Binding Path=Status.Id, Converter={StaticResource keyFreeRequestEnableConverter}}" Visibility="{Binding Path=RequestAreaVisibility,Mode=OneWay}" Margin="20,1" Click="RequestOutButton_Click" IsTabStop="False">
                <Image Source="/CustomBrokerWpf;component/Images/niz.png" />
            </Button>
            <Button ToolTip="Папка документов" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SpecFolderOpen}" Visibility="{Binding Path=SpecificationAreaVisibility,Mode=OneWay}" Margin="20,1,4,1" IsTabStop="False" Background="Transparent">
                <Image Source="/CustomBrokerWpf;component/Images/catalog.png" />
            </Button>
            <Button ToolTip="Добавить спецификацию (разбивку)" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SpecAdd}" CommandParameter="{Binding ElementName=ParcelRequestDataGrid, Path=SelectedItem}" Visibility="{Binding Path=SpecificationAreaVisibility,Mode=OneWay}" Margin="4,1" IsTabStop="False" Background="Transparent">
                <Image Source="/CustomBrokerWpf;component/Images/rPlus_01-66-512.png" />
            </Button>
            <Button ToolTip="Удалить спецификацию (разбивку)" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.SpecDel}" CommandParameter="{Binding ElementName=SpecificationDataGrid, Path=SelectedItems}" Visibility="{Binding Path=SpecificationAreaVisibility,Mode=OneWay}" Margin="4,1" IsTabStop="False" Background="Transparent">
                <Image Source="/CustomBrokerWpf;component/Images/remove.png" />
            </Button>
            <Button ToolTip="Подготовить реализацию для 1С" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.Selling1C}" CommandParameter="{Binding ElementName=SpecificationDataGrid, Path=SelectedItems}" Visibility="{Binding Path=SpecificationAreaVisibility,Mode=OneWay}" Margin="4,1" IsTabStop="False" Background="Transparent">
                <Image Source="/CustomBrokerWpf;component/Images/1C.jpg" />
            </Button>
        </StackPanel>
        <DataGrid x:Name="NoParcelRequestDataGrid" ItemsSource="{Binding Path=Requests}" Grid.Row="7" Grid.ColumnSpan="2" CanUserAddRows="False" CanUserDeleteRows="False" AutoGenerateColumns="False" SelectionChanged="NoParcelRequestDataGrid_SelectionChanged" IsTabStop="False" FrozenColumnCount="1" RowHeaderWidth="15" CanUserResizeRows="False" HorizontalGridLinesBrush="RoyalBlue" VerticalGridLinesBrush="RoyalBlue" AlternatingRowBackground="WhiteSmoke"
						Visibility="{Binding Path=RequestAreaVisibility,Mode=OneWay}" IsEnabled="{Binding IsEnabled}"
                              HorizontalAlignment="Left"  ColumnDisplayIndexChanged="NoParcelRequestDataGrid_ColumnDisplayIndexChanged"
                              Background="#e0f7e3" MouseDoubleClick="RequestsDataGrid_MouseDoubleClick"
                              BeginningEdit="RequestsDataGrid_BeginningEdit" RowEditEnding="RequestsDataGrid_RowEditEnding" 
                  >
            <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="False">
                            <Setter Property="Background" Value="#e0f7e3"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
            <DataGrid.Columns>
                <DataGridTextColumn Header="№" Binding="{Binding Path=Id, Converter={StaticResource keyNoDisplayNewId}}" IsReadOnly="True" ElementStyle="{StaticResource NumberCenterStyleView}" />
                <DataGridTextColumn Header="Складской №" Binding="{Binding Path=StorePointDate, ValidatesOnExceptions=true, NotifyOnValidationError=true, TargetNullValue='', Mode=OneWay}">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False"/>
                                        <Condition Binding="{Binding ShipmentDelay}" Value="1"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7ede0"/>
                                </MultiDataTrigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False"/>
                                        <Condition Binding="{Binding ShipmentDelay}" Value="2"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7e0e0"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridComboBoxColumn Header="Статус" SelectedItemBinding="{Binding Path=Status}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.RequestStates}" DisplayMemberPath="Name" SortMemberPath="Status.Id" ClipboardContentBinding="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}" Width="64"/>
                <DataGridTextColumn Header="Группа" Binding="{Binding Path=ParcelGroup, UpdateSourceTrigger=LostFocus, TargetNullValue='',NotifyOnValidationError=True}" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Группа загрузки (Позиция по складу)"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="КОН" Binding="{Binding Path=Consolidate, UpdateSourceTrigger=LostFocus, TargetNullValue='',NotifyOnValidationError=True}" IsReadOnly="True" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Консолидация"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTemplateColumn CanUserSort="False" SortMemberPath="Template1" Width="SizeToCells">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid HorizontalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="18"/>
                                    <ColumnDefinition Width="18"/>
                                    <ColumnDefinition Width="18"/>
                                    <ColumnDefinition Width="18"/>
                                    <!--<ColumnDefinition Width="18"/>-->
                                </Grid.ColumnDefinitions>
                                <!--<Button ToolTip="Каталог" Tag="{Binding}" Click="RequestFolderOpen_Click" Grid.Column="0"  Margin="2,0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Padding="0" BorderBrush="{x:Null}" Background="{x:Null}">
												<Image Source="Images/cat.png"/>
											</Button>-->
                                <Image ToolTip="Группа менеджеров" Grid.Column="0" Source="{Binding Path=ManagerGroupImage}" Margin="2,0"/>
                                <!--<ComboBox Grid.Column="2" SelectedIndex="{Binding Path=StateInv,TargetNullValue=0,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="Инвойс" Style="{StaticResource ComboBoxButtonLess}" Height="14" Margin="2,0" Padding="0">
												<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
													<Image Source="/CustomBrokerWpf;component/Images/plus.gif" Height="14" Margin="0"/>
												</ComboBoxItem>
												<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
													<Image Source="Images/inv_1.png" Height="14" Margin="0"/>
												</ComboBoxItem>
												<ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
													<Image Source="/CustomBrokerWpf;component/Images/inv_2.png" Height="14" Margin="0"/>
												</ComboBoxItem>
											</ComboBox>-->
                                <Image Grid.Column="1" ToolTip="Разбивка загружена" Source="{Binding Path=StateExcImagePath,Mode=OneWay}" Height="14"  Margin="2,0"/>
                                <ComboBox Grid.Column="2" SelectedIndex="{Binding Path=StateDoc,TargetNullValue=0,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ToolTip="МАРКИРОВКА" Style="{StaticResource ComboBoxButtonLess}" Height="14" Margin="2,0" Padding="0">
                                    <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                        <Image Source="/CustomBrokerWpf;component/Images/plus.gif" Height="14" Margin="0"/>
                                    </ComboBoxItem>
                                    <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                        <Image Source="/CustomBrokerWpf;component/Images/doc_1.png" Height="14" Margin="0"/>
                                    </ComboBoxItem>
                                    <ComboBoxItem Padding="0" VerticalContentAlignment="Center" HorizontalContentAlignment="Center">
                                        <Image Source="/CustomBrokerWpf;component/Images/doc_2.png" Height="14" Margin="0"/>
                                    </ComboBoxItem>
                                </ComboBox>
                                <Image Grid.Column="3" Source="{Binding Path=MailStateImage}" Margin="2,0" ToolTip="{Binding Path=MailStateToolTip}"/>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Менеджер" CanUserSort="True" SortMemberPath="Manager.NameComb" ClipboardContentBinding="{Binding Path=Manager.NameComb}" Width="SizeToHeader">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Manager.NameComb}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Managers}"  SelectedValue="{Binding Path=Manager,UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="NameComb" IsSynchronizedWithCurrentItem="False"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Поставщик" CanUserSort="True" SortMemberPath="Agent.Name" ClipboardContentBinding="{Binding Path=Agent.Name}" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Agent.Name, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=Agent.Name}"/>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox SelectedValue="{Binding Path=AgentId, TargetNullValue=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource keyNotNullConverter}}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=Agent.Name}"
                                                  ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Agents}" SelectedValuePath="Id" DisplayMemberPath="Name">
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Торговые марки" Width="150" CanUserSort="True" SortMemberPath="BrandNames" ClipboardContentBinding="{Binding Path=BrandNames}">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=BrandNames, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=BrandNames}"/>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox Text="{Binding Path=BrandNames, Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=BrandNames}"
                                                  ItemsSource="{Binding Path=Brands}" DisplayMemberPath="Brand.Name">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding Path=Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}" VerticalContentAlignment="Center" Style="{StaticResource ErrorStyle}">
                                            <TextBlock Text="{Binding Brand.Name}" VerticalAlignment="Center"/>
                                        </CheckBox>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Клиент" CanUserSort="True" SortMemberPath="Customer.Name" ClipboardContentBinding="{Binding Path=Customer.Name}" Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Customer.Name, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox SelectedValue="{Binding Path=CustomerId, TargetNullValue=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource keyNotNullConverter}}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=Customer.Name}"
                                                  ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Customers}" SelectedValuePath="Id" DisplayMemberPath="Name">
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=Agent.Name}"/>
                            <Setter Property="FontWeight" Value="{Binding Customer.NameFontWeight}"/>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Юр. лица" Width="150" SortMemberPath="CustomerLegalsNames">
                    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=CustomerLegalsNames}"/>
                            <Setter Property="FontWeight" Value="{Binding CustomerLegalsNamesFontWeight}"/>
                            <Style.Triggers>
                                <MultiDataTrigger >
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Path=InvoiceDiscountFill, TargetNullValue=''}" Value="False" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7e0e0"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=CustomerLegalsNames, Mode=OneWay, TargetNullValue=''}" Margin="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox Text="{Binding Path=CustomerLegalsNames, Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" StaysOpenOnEdit="True" IsDropDownOpen="True" ToolTip="{Binding Path=CustomerLegalsNames}"
                                                  ItemsSource="{Binding Path=CustomerLegals}" DisplayMemberPath="CustomerLegal.Name">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding Path=Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}">
                                            <TextBlock Text="{Binding CustomerLegal.Name}"/>
                                        </CheckBox>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridCheckBoxColumn Header="ЭДО Деливери" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.EDOD, Mode=TwoWay}" IsThreeState="False" Width="50">
                    <DataGridCheckBoxColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="ЭДО Деливери"/>
                        </Style>
                    </DataGridCheckBoxColumn.HeaderStyle>
                </DataGridCheckBoxColumn>
                <DataGridCheckBoxColumn Header="ЭДО Tрэйд" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.EDOT, Mode=TwoWay}" IsThreeState="False" Width="50">
                    <DataGridCheckBoxColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="ЭДО Tрэйд"/>
                        </Style>
                    </DataGridCheckBoxColumn.HeaderStyle>
                </DataGridCheckBoxColumn>
                <DataGridComboBoxColumn Header="Импортер" SelectedItemBinding="{Binding Path=Importer}" ClipboardContentBinding="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}"
                                    ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.Importers}" DisplayMemberPath="Name" SortMemberPath="Importer.Name"  Width="100">
                    <DataGridComboBoxColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text}"/>
                        </Style>
                    </DataGridComboBoxColumn.CellStyle>
                </DataGridComboBoxColumn>
                <DataGridTextColumn Header="Вес Д" Binding="{Binding Path=OfficialWeight, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Width="50" />
                <DataGridTextColumn Header="Вес Ф" Binding="{Binding Path=ActualWeight, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Width="50"/>
                <DataGridTextColumn Header="Объем" Binding="{Binding Path=Volume, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" />
                <DataGridTextColumn Header="Мест" Binding="{Binding Path=CellNumber, TargetNullValue='', NotifyOnValidationError=True, ValidatesOnExceptions=true}" ElementStyle="{StaticResource NumberCenterStyleView}" EditingElementStyle="{StaticResource NumberCenterStyleViewEdit}" />
                <DataGridTextColumn Header="Инвойс" Binding="{Binding Path=Invoice, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Selector.IsSelected="True" Width="80" />
                <DataGridTextColumn Header="Со скидкой" Binding="{Binding Path=InvoiceDiscount, StringFormat=\{0:N\}, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" Selector.IsSelected="True" Width="80" />
                <DataGridComboBoxColumn Header="Услуга" SelectedValueBinding="{Binding Path=ServiceType, TargetNullValue=''}" ItemsSource="{Binding Source={StaticResource MainDataContext}, Path=Data.ServiceTypes}" SelectedValuePath="Name" DisplayMemberPath="Name"/>
                <DataGridTemplateColumn Header="Тип груза" CanUserSort="True" SortMemberPath="Cargo" ClipboardContentBinding="{Binding Path=Cargo}" Width="SizeToHeader">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Cargo, TargetNullValue=''}" Margin="2"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=Cargo}"/>
                        </Style>
                    </DataGridTemplateColumn.CellStyle>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding Path=CargoList}" Text="{Binding Path=Cargo,Mode=OneWay, TargetNullValue=''}" IsEditable="True" IsReadOnly="True" IsSynchronizedWithCurrentItem="False" IsDropDownOpen="True" ToolTip="{Binding Path=Cargo}">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding Selected, Mode=TwoWay}" IsThreeState="False" Margin="0" HorizontalContentAlignment="Stretch" Width="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=ComboBox}, Path=ActualWidth}" VerticalContentAlignment="Center" Style="{StaticResource ErrorStyle}">
                                            <TextBlock Text="{Binding Name}" VerticalAlignment="Center"/>
                                        </CheckBox>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Счет" Binding="{Binding Path=TotalPay, StringFormat=\{0:N0\}, TargetNullValue=''}" IsReadOnly="True" Width="80">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="{x:Type DataGridCell}">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="False">
                                    <Setter Property="Background" Value="#f7ede0" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Доход" Binding="{Binding Path=IncomePay, StringFormat=\{0:N0\}, TargetNullValue=''}" IsReadOnly="True" Width="80">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="{x:Type DataGridCell}">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="False">
                                    <Setter Property="Background" Value="#f7ede0" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=IncomePayPoor,Mode=OneWay}" Value="True">
                                    <Setter Property="Foreground" Value="Red"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="СЧ, %" Binding="{Binding TotalPayInvoicePer, Mode=OneWay, NotifyOnValidationError=True, StringFormat=\{0:P\}, TargetNullValue=''}" ElementStyle="{StaticResource MoneyStyleView}" EditingElementStyle="{StaticResource MoneyStyleEdit}" IsReadOnly="True" Width="80">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="{x:Type DataGridCell}">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="False">
                                    <Setter Property="Background" Value="#f7ede0" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding}" Background="#f7ede0" FontWeight="Bold" Padding="4,0" />
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="ТП.%" Binding="{Binding Path=CustomsPayInvoice, Mode=OneWay, StringFormat=\{0:P\}, TargetNullValue=''}" ElementStyle="{StaticResource MoneyStyleView}" IsReadOnly="True" Width="80">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="{x:Type DataGridCell}">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="False">
                                    <Setter Property="Background" Value="#f7e0e0" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="{x:Type DataGridColumnHeader}" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding}" Background="#f7e0e0" FontWeight="Bold" Padding="4,0" />
                                        </StackPanel>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Доставка" Binding="{Binding Path=CustomerLegalsSelected/CustomerLegal.DeliveryType_.Name, TargetNullValue='', NotifyOnValidationError=True, UpdateSourceTrigger=LostFocus}" ElementStyle="{StaticResource StyleTextBlockAlignmentCenter}" Selector.IsSelected="True" Width="80" />
                <DataGridTextColumn Header="Примечания" Binding="{Binding Path=Notes,Mode=OneWay}" IsReadOnly="True" Width="SizeToHeader"/>
                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Click="HistoryOpen_Click" Tag="{Binding}" Height="15" Padding="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Background="{x:Null}" >
                                <Image Source="/CustomBrokerWpf;component/Images/his.png" />
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <DataGrid x:Name="SpecificationDataGrid" ItemsSource="{Binding Path=Specifications}" Grid.Row="7" Grid.ColumnSpan="2" Visibility="{Binding Path=SpecificationAreaVisibility,Mode=OneWay}" IsEnabled="{Binding IsEnabled}" Background="#e0f7e3"
                              CanUserAddRows="False" CanUserDeleteRows="False" AutoGenerateColumns="False" IsTabStop="False" FrozenColumnCount="1" RowHeaderWidth="15" CanUserResizeRows="False" HorizontalGridLinesBrush="RoyalBlue" VerticalGridLinesBrush="RoyalBlue" AlternatingRowBackground="WhiteSmoke"
                               MouseDoubleClick="SpecificationDataGrid_MouseDoubleClick"
                              >
            <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="False">
                            <Setter Property="Background" Value="#e0f7e3"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
            <DataGrid.Columns>
                <DataGridTemplateColumn CanUserReorder="False" Header="Файл">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Command="{Binding FileOpen}" ToolTip="{Binding Path=FilePath}" Height="16" Padding="0" Margin="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center">
                                <Image Source="/CustomBrokerWpf;component/Images/vexcel4.png" />
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="№" Binding="{Binding Path=CFPR, TargetNullValue='', Mode=OneWay}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Консолидация \ Группа загрузки \ Заявка"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTemplateColumn Header="№ ТД" SortMemberPath="Declaration.Number" ClipboardContentBinding="{Binding Path=Declaration.Number}">
                    <DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Номер таможенной декларации"/>
                        </Style>
                    </DataGridTemplateColumn.HeaderStyle>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{Binding Path=Declaration.Number, TargetNullValue=''}" Margin="2,0"/>
                                <Button Content="" ToolTip="Загрузка таможенной декларации" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.TDLoad}" CommandParameter="{Binding}" Grid.Column="1" FontFamily="Segoe UI Symbol" Foreground="Green" Background="#f7e0e0"/>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Text="{Binding Path=Declaration.Number, TargetNullValue=''}" Margin="2,0"/>
                                <Button Content="" ToolTip="Загрузка таможенной декларации" Command="{Binding Source={StaticResource MainDataContext}, Path=Data.TDLoad}" CommandParameter="{Binding}" Grid.Column="1" FontFamily="Segoe UI Symbol" Foreground="Green" Background="#f7e0e0"/>
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Импортер" Binding="{Binding Path=Importer.Name, TargetNullValue='', Mode=OneWay}"/>
                <DataGridTextColumn Header="Поставщик" Binding="{Binding Path=Agent.Name, TargetNullValue='', Mode=OneWay}" Width="200">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path=Agent.Name}"/>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Клиенты" Binding="{Binding Path= Customers, TargetNullValue='', Mode=OneWay}" Width="200">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path= Customers}"/>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Юр лица" Binding="{Binding Path= CustomerLegals, TargetNullValue='', Mode=OneWay}" Width="300">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="ToolTip" Value="{Binding Path= CustomerLegals}"/>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Инвойс" Binding="{Binding Path= Invoice, StringFormat=\{0:N2\}, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Сумма Инвойс со скидкой заявок"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <MultiDataTrigger >
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Path=TotalSumNotEquals, TargetNullValue=''}" Value="True" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7e0e0"/>
                                    <Setter Property="ToolTip" Value="Сумма Инвойс со скидкой заявок, Сумма таможенной декларации и Сумма по графе Цена разбивок не совпадают !"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Сумма ТД" Binding="{Binding Path=Declaration.TotalSum, StringFormat=\{0:N2\}, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Сумма таможенной декларации"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <MultiDataTrigger >
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Path=TDSumNotEquals, TargetNullValue=''}" Value="True" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7e0e0"/>
                                    <Setter Property="ToolTip" Value="Сумма Инвойс со скидкой заявок, Сумма таможенной декларации и Сумма по графе Цена разбивок не совпадают !"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Стоимость" Binding="{Binding Path= Cost, StringFormat=\{0:N2\}, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Сумма по графе Цена разбивок"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <MultiDataTrigger >
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Path=DetailSumNotEquals, TargetNullValue=''}" Value="True" />
                                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsSelected}" Value="False" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Background" Value="#f7e0e0"/>
                                    <Setter Property="ToolTip" Value="Сумма Инвойс со скидкой заявок, Сумма таможенной декларации и Сумма по графе Цена разбивок не совпадают !"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Не разнесено" Binding="{Binding Path=FondSum, Mode=OneWay, StringFormat=\{0:N0\}}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Сумма разбивок не разнесенная по юр лицам"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Разница" Binding="{Binding Path=ClientSumDiff, Mode=OneWay, StringFormat=\{0:N0\}}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
                            <Setter Property="ToolTip" Value="Разница сумм в разбивках и в заявках по юр лицам"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Кол-во" Binding="{Binding Path=Amount, Mode=OneWay, StringFormat=\{0:N0\}}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}"/>
                <DataGridTextColumn Header="Нетто" Binding="{Binding Path=NetWeight, StringFormat=\{0:N2\}, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}"/>
                <DataGridTextColumn Header="Брутто" Binding="{Binding Path=GrossWeight, StringFormat=\{0:N2\}, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}"/>
                <DataGridTextColumn Header="Кол-во мест" Binding="{Binding Path= CellNumber, TargetNullValue='', Mode=OneWay}" ElementStyle="{StaticResource StyleTextBlockAlignmentRight}"/>
            </DataGrid.Columns>
        </DataGrid>
        <StackPanel Orientation="Horizontal" Grid.Row="8" Margin="4" Visibility="{Binding Path=RequestAreaVisibility,Mode=OneWay}" Grid.ColumnSpan="2">
            <TextBlock Text="Кол-во мест" Grid.Row="1" Grid.Column="7" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            <TextBox Text="{Binding Path=CellNumberFree,Mode=OneWay}" Grid.Row="1" Grid.Column="8" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            <TextBlock Text="Вес по док, кг" Grid.Row="2" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            <TextBox Text="{Binding Path=OfficialWeightFree, StringFormat=\{0:N4\},Mode=OneWay}" Grid.Row="2" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            <TextBlock Text="Объем, м3" Grid.Row="1" Grid.Column="3" Margin="5,0,0,0" VerticalAlignment="Center"/>
            <TextBox Text="{Binding Path=VolumeFree, StringFormat=\{0:N4\},Mode=OneWay}" Grid.Row="1" Grid.Column="4" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            <TextBlock Text="Вес факт, кг" Grid.Row="1" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            <TextBox Text="{Binding Path=ActualWeightFree, StringFormat=\{0:N4\},Mode=OneWay}" Grid.Row="1" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            <TextBlock Text="факт-док" Grid.Row="3" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            <TextBox Text="{Binding Path=DifferenceWeightFree, StringFormat=\{0:N4\},Mode=OneWay}" Grid.Row="3" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
            <TextBlock Text="стоимость" Grid.Row="3" Grid.Column="5" Margin="5,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            <TextBox Text="{Binding Path=InvoiceDiscountFree, StringFormat=\{0:N2\},Mode=OneWay}" Grid.Row="3" Grid.Column="6" Margin="3,2,3,0" TextAlignment="Right" IsReadOnly="True" IsTabStop="False" />
        </StackPanel>
    </Grid>
</UserControl>
